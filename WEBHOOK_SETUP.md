# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –ë–µ–¥–æ–ª–∞–≥–∞ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–∞–Ω–µ–ª—å Remnawave** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç** –ø—Ä–∏–Ω–∏–º–∞–µ—Ç webhook –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Ç–æ–ø–∏–∫
3. –í —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (–¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –ª–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ —Ç.–¥.)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# –ü–æ—Ä—Ç –¥–ª—è webhook —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)
WEBHOOK_PORT=8080

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ webhook (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–ª—é—á –∫–æ–º–∞–Ω–¥–æ–π: openssl rand -hex 64
WEBHOOK_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–Ω–µ–ª–∏ Remnawave

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–∞–Ω–µ–ª–∏ Remnawave (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è) —É–∫–∞–∂–∏—Ç–µ:

```env
# –í–∫–ª—é—á–∏—Ç—å webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
WEBHOOK_ENABLED=true

# URL –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ webhook

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ë–æ—Ç –∏ –ø–∞–Ω–µ–ª—å –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏ (–ª–æ–∫–∞–ª—å–Ω–æ)
# ‚ö†Ô∏è –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP, –∞ –Ω–µ HTTPS –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö Docker —Å–µ—Ä–≤–∏—Å–æ–≤!
# Webhook —Å–µ—Ä–≤–µ—Ä –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP, –∞ –Ω–µ HTTPS
WEBHOOK_URL=http://remnawave-admin-bot:8080/webhook
# –∏–ª–∏ –µ—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–¥—Ä—É–≥–æ–º—É (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º—è –≤ docker-compose.yml):
# WEBHOOK_URL=http://bot:8080/webhook

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–æ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ HTTP (–µ—Å–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç)
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP –∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω –±–µ–∑ SSL
WEBHOOK_URL=http://IP-–ê–î–†–ï–°-–°–ï–†–í–ï–†–ê:8080/webhook
# –∏–ª–∏
WEBHOOK_URL=http://–¥–æ–º–µ–Ω-–±–æ—Ç–∞.com:8080/webhook

# –í–∞—Ä–∏–∞–Ω—Ç 3: –ë–æ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ HTTPS (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
# ‚ö†Ô∏è –í–ê–ñ–ù–û: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π –∏ –Ω–µ –∏—Å—Ç–µ–∫!
# –ù—É–∂–µ–Ω reverse proxy (nginx, traefik, caddy) —Å –≤–∞–ª–∏–¥–Ω—ã–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
WEBHOOK_URL=https://–¥–æ–º–µ–Ω-–±–æ—Ç–∞.com/webhook
# –∏–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç:
# WEBHOOK_URL=https://–¥–æ–º–µ–Ω-–±–æ—Ç–∞.com:8443/webhook

# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å WEBHOOK_SECRET –≤ –∞–¥–º–∏–Ω—Å–∫–æ–º –±–æ—Ç–µ)
# –ü–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∫–ª—é—á –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è HMAC-SHA256 –ø–æ–¥–ø–∏—Å–∏ –æ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
# –ü–æ–¥–ø–∏—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ X-Remnawave-Signature
WEBHOOK_SECRET_HEADER=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
```

**–í–∞–∂–Ω–æ:** 
- `WEBHOOK_SECRET_HEADER` –≤ –ø–∞–Ω–µ–ª–∏ –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `WEBHOOK_SECRET` –≤ –∞–¥–º–∏–Ω—Å–∫–æ–º –±–æ—Ç–µ
- –ü–∞–Ω–µ–ª—å Remnawave –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HMAC-SHA256 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏ –æ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
- –ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫ HMAC –ø–æ–¥–ø–∏—Å—å, —Ç–∞–∫ –∏ –ø—Ä–æ—Å—Ç–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Compose

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker Compose, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω:

```yaml
services:
  bot:
    ports:
      - "8080:8080"  # –ü–æ—Ä—Ç webhook —Å–µ—Ä–≤–µ—Ä–∞
    environment:
      WEBHOOK_PORT: 8080
      WEBHOOK_SECRET: –≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∞–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç –∏ –ø–∞–Ω–µ–ª—å Remnawave
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ - –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   üåê Webhook server will be started on port 8080
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å webhook endpoint:
   ```bash
   curl http://localhost:8080/webhook/health
   ```
   –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è: `{"status":"ok","service":"webhook"}`

4. –°–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞ –ë–µ–¥–æ–ª–∞–≥–∞
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ –≤ Telegram —Ç–æ–ø–∏–∫

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

–ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ Remnawave:

### –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`user.*`)
- `user.created` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.modified` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∏—Å–∫—É)
- `user.deleted` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.revoked` - –æ—Ç–∑—ã–≤ –ø–æ–¥–ø–∏—Å–∫–∏
- `user.disabled` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.enabled` - –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.limited` - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.expired` - –∏—Å—Ç–µ—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `user.traffic_reset` - —Å–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞
- `user.expires_in_72_hours` - –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 72 —á–∞—Å–∞
- `user.expires_in_48_hours` - –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 48 —á–∞—Å–æ–≤
- `user.expires_in_24_hours` - –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
- `user.expired_24_hours_ago` - –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞ 24 —á–∞—Å–∞ –Ω–∞–∑–∞–¥
- `user.first_connected` - –ø–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `user.bandwidth_usage_threshold_reached` - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ø–æ—Ä–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞
- `user.not_connected` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–ª—Å—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

### –°–æ–±—ã—Ç–∏—è HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (`user_hwid_devices.*`)
- `user_hwid_devices.added` - –¥–æ–±–∞–≤–ª–µ–Ω–æ HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- `user_hwid_devices.deleted` - —É–¥–∞–ª–µ–Ω–æ HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –°–æ–±—ã—Ç–∏—è –Ω–æ–¥ (`node.*`)
- `node.created` - —Å–æ–∑–¥–∞–Ω–∞ –Ω–æ–¥–∞
- `node.modified` - –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–æ–¥–∞
- `node.deleted` - —É–¥–∞–ª–µ–Ω–∞ –Ω–æ–¥–∞
- `node.disabled` - –Ω–æ–¥–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞
- `node.enabled` - –Ω–æ–¥–∞ –≤–∫–ª—é—á–µ–Ω–∞
- `node.connection_lost` - –ø–æ—Ç–µ—Ä—è–Ω–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –Ω–æ–¥–æ–π
- `node.connection_restored` - —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –Ω–æ–¥–æ–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- `node.traffic_notify` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ç—Ä–∞—Ñ–∏–∫–µ –Ω–æ–¥—ã

### –°–æ–±—ã—Ç–∏—è —Å–µ—Ä–≤–∏—Å–∞ (`service.*`)
- `service.panel_started` - –ø–∞–Ω–µ–ª—å –∑–∞–ø—É—â–µ–Ω–∞
- `service.login_attempt_failed` - –Ω–µ—É–¥–∞—á–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –≤—Ö–æ–¥–∞
- `service.login_attempt_success` - —É—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥

### –°–æ–±—ã—Ç–∏—è –æ—à–∏–±–æ–∫ (`errors.*`)
- `errors.bandwidth_usage_threshold_reached_max_notifications` - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Ç—Ä–∞—Ñ–∏–∫–µ

### –°–æ–±—ã—Ç–∏—è CRM (`crm.*`)
- `crm.infra_billing_node_payment_in_7_days` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
- `crm.infra_billing_node_payment_in_48hrs` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ 48 —á–∞—Å–æ–≤
- `crm.infra_billing_node_payment_in_24hrs` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
- `crm.infra_billing_node_payment_due_today` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã —Å–µ–≥–æ–¥–Ω—è
- `crm.infra_billing_node_payment_overdue_24hrs` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –Ω–∞ 24 —á–∞—Å–∞
- `crm.infra_billing_node_payment_overdue_48hrs` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –Ω–∞ 48 —á–∞—Å–æ–≤
- `crm.infra_billing_node_payment_overdue_7_days` - –æ–ø–ª–∞—Ç–∞ –Ω–æ–¥—ã –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–∞ –Ω–∞ 7 –¥–Ω–µ–π

## –§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
–°–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
- ‚úÖ Username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üì∂ –õ–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ (—Å—Ç–∞—Ä–æ–µ ‚Üí –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- ‚è≥ –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ (—Å—Ç–∞—Ä–æ–µ ‚Üí –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- üíª HWID –ª–∏–º–∏—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (—Å—Ç–∞—Ä–æ–µ ‚Üí –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–ø–∏—Å–∫—É
- üë• –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Å–∫–≤–∞–¥
- –ò –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –µ—Å–ª–∏ –æ–Ω–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–¥–∞—Ö
–°–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–¥–µ:
- üñ• –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–¥—ã
- üÜî UUID –Ω–æ–¥—ã
- üåê –ê–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç
- üåç –°—Ç—Ä–∞–Ω–∞
- üìä –°—Ç–∞—Ç—É—Å
- üì∂ –õ–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ
–°–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–±—ã—Ç–∏—è—Ö –ø–∞–Ω–µ–ª–∏:
- üë§ Username (–¥–ª—è —Å–æ–±—ã—Ç–∏–π –≤—Ö–æ–¥–∞)
- üåê IP –∞–¥—Ä–µ—Å
- üîç User Agent

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
–°–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
- üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- üíª HWID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è CRM (–±–∏–ª–ª–∏–Ω–≥)
–°–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–ª–∞—Ç–µ–∂–∞—Ö –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É:
- üñ• –ù–æ–¥–∞
- üè¢ –ü—Ä–æ–≤–∞–π–¥–µ—Ä
- üíµ –°—É–º–º–∞
- üìÖ –î–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–π –æ–ø–ª–∞—Ç—ã

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `WEBHOOK_SECRET`! –ë–µ–∑ –Ω–µ–≥–æ –ª—é–±–æ–π –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å webhook –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤–∞—à –±–æ—Ç.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –∫–æ–º–∞–Ω–¥–æ–π: `openssl rand -hex 64`
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `WEBHOOK_ENABLED=true` –≤ –ø–∞–Ω–µ–ª–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `WEBHOOK_URL` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω –≤ Docker
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø–∞–Ω–µ–ª–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ webhook
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞

### –û—à–∏–±–∫–∞ SSL/TLS (EPROTO, tlsv1 alert internal error)

–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö –ø–∞–Ω–µ–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:
```
Error: Failed to send webhook after 3 retries: write EPROTO ...:error:0A000438:SSL routines:ssl3_read_bytes:tlsv1 alert internal error
```

**–ü—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTPS –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö Docker —Å–µ—Ä–≤–∏—Å–æ–≤**
   - ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** `WEBHOOK_URL=https://remnawave-admin-bot:8080/webhook`
   - ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `WEBHOOK_URL=http://remnawave-admin-bot:8080/webhook`
   - –î–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏ –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP, –∞ –Ω–µ HTTPS

2. **–ü—Ä–æ–±–ª–µ–º—ã —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º –Ω–∞ –≤–Ω–µ—à–Ω–µ–º –¥–æ–º–µ–Ω–µ (–±–æ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ)**
   
   ‚ö†Ô∏è **–í–ê–ñ–ù–û:** Webhook —Å–µ—Ä–≤–µ—Ä –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç **–¢–û–õ–¨–ö–û –ø–æ HTTP**, –∞ –Ω–µ HTTPS!
   
   **–ï—Å–ª–∏ –≤—ã —É–∫–∞–∑–∞–ª–∏ HTTPS URL –≤ –ø–∞–Ω–µ–ª–∏, –Ω–æ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ reverse proxy:**
   - ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:** `WEBHOOK_URL=https://IP-–ê–î–†–ï–°:8080/webhook` (–±–µ–∑ reverse proxy)
   - ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:** `WEBHOOK_URL=http://IP-–ê–î–†–ï–°:8080/webhook` (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP)
   
   **–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**
   
   **–í–∞—Ä–∏–∞–Ω—Ç A (–ø—Ä–æ—â–µ):** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTP –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
   ```
   WEBHOOK_URL=http://IP-–ê–î–†–ï–°-–°–ï–†–í–ï–†–ê:8080/webhook
   # –∏–ª–∏ –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–º–µ–Ω:
   WEBHOOK_URL=http://–¥–æ–º–µ–Ω-–±–æ—Ç–∞.com:8080/webhook
   ```
   ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 8080 –¥–æ—Å—Ç—É–ø–µ–Ω —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–∞–Ω–µ–ª–∏ (firewall, security groups)
   
   **–í–∞—Ä–∏–∞–Ω—Ç B (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ):** –ù–∞—Å—Ç—Ä–æ–π—Ç–µ reverse proxy —Å HTTPS:
   - Webhook —Å–µ—Ä–≤–µ—Ä –±–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTP –Ω–∞ –ø–æ—Ä—Ç—É 8080 (–≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞)
   - Reverse proxy (nginx, traefik, caddy) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç HTTPS –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ `http://localhost:8080/webhook`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Let's Encrypt –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   - –ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `WEBHOOK_URL=https://–¥–æ–º–µ–Ω-–±–æ—Ç–∞.com/webhook`
   
   **–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx –¥–ª—è reverse proxy:**
   ```nginx
   server {
       listen 443 ssl http2;
       server_name –≤–∞—à-–¥–æ–º–µ–Ω.com;
       
       # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
       ssl_certificate /etc/letsencrypt/live/–≤–∞—à-–¥–æ–º–µ–Ω.com/fullchain.pem;
       ssl_certificate_key /etc/letsencrypt/live/–≤–∞—à-–¥–æ–º–µ–Ω.com/privkey.pem;
       
       location /webhook {
           proxy_pass http://localhost:8080;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
       }
   }
   ```
   
   **–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Caddy (Caddyfile):**
   ```caddy
   –≤–∞—à-–¥–æ–º–µ–Ω.com {
       # –í–∞—Ä–∏–∞–Ω—Ç 1: –ï—Å–ª–∏ Caddy –∏ –±–æ—Ç –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏
       reverse_proxy /webhook bot:8080
       
       # –í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ Caddy –Ω–∞ —Ö–æ—Å—Ç–µ, –∞ –±–æ—Ç –≤ Docker (–ø–æ—Ä—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω)
       # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 127.0.0.1 –≤–º–µ—Å—Ç–æ localhost, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å IPv6
       # reverse_proxy /webhook 127.0.0.1:8080
       
       # –í–∞—Ä–∏–∞–Ω—Ç 3: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑ docker-compose.yml
       # reverse_proxy /webhook remnawave-admin-bot:8080
   }
   ```
   
   ‚ö†Ô∏è **–í–∞–∂–Ω–æ –¥–ª—è Caddy:**
   - **–ï—Å–ª–∏ Caddy –∏ –±–æ—Ç –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ `bot:8080` (–∏–∑ docker-compose.yml)
   - **–ï—Å–ª–∏ Caddy –Ω–∞ —Ö–æ—Å—Ç–µ, –∞ –±–æ—Ç –≤ Docker:** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `127.0.0.1:8080` (–ù–ï `localhost:8080`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å IPv6)
   - **–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É `connection refused`:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8080 –ø—Ä–æ–±—Ä–æ—à–µ–Ω –Ω–∞ —Ö–æ—Å—Ç –≤ docker-compose.yml
   - **–ï—Å–ª–∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É `no such host`:** —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Caddy –∏ –±–æ—Ç –≤ –æ–¥–Ω–æ–π Docker —Å–µ—Ç–∏, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP –∞–¥—Ä–µ—Å
   
   **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "connection refused":**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —Å–ª—É—à–∞–µ—Ç –Ω–∞ `0.0.0.0:8080` (–Ω–µ –Ω–∞ `127.0.0.1:8080`)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –ø—Ä–æ–±—Ä–æ—à–µ–Ω: `docker-compose.yml` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `ports: - "8080:8080"`
   - –ï—Å–ª–∏ Caddy –≤ Docker, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞/—Å–µ—Ä–≤–∏—Å–∞ –≤–º–µ—Å—Ç–æ `localhost`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `127.0.0.1` –≤–º–µ—Å—Ç–æ `localhost` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è IPv4

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ webhook endpoint**
   ```bash
   # –ò–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–∞–Ω–µ–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
   curl http://remnawave-admin-bot:8080/webhook/health
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è: {"status":"ok","service":"webhook"}
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤ Docker**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ `WEBHOOK_URL` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–µ–Ω–µ–º —Å–µ—Ä–≤–∏—Å–∞ –≤ `docker-compose.yml`
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `bot`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `http://bot:8080/webhook`
   - –ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `remnawave-admin-bot`, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `http://remnawave-admin-bot:8080/webhook`

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `NOTIFICATIONS_CHAT_ID` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –∞–¥–º–∏–Ω—Å–∫–æ–º –±–æ—Ç–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —á–∞—Ç—É/—Ç–æ–ø–∏–∫—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞ 401 Unauthorized

–û—à–∏–±–∫–∞ `Failed to send webhook after 3 retries: Request failed with status code 401` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –±–æ—Ç –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏:**

–ü–∞–Ω–µ–ª—å Remnawave –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **HMAC-SHA256** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏ –æ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞. –ê–¥–º–∏–Ω—Å–∫–∏–π –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –í—ã—á–∏—Å–ª—è–µ—Ç HMAC-SHA256 –æ—Ç —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `WEBHOOK_SECRET`
2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–Ω—É—é –ø–æ–¥–ø–∏—Å—å —Å –ø–æ–¥–ø–∏—Å—å—é –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `X-Remnawave-Signature`
3. –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

**–ü—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è:**

1. **–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `WEBHOOK_SECRET` –≤ –∞–¥–º–∏–Ω—Å–∫–æ–º –±–æ—Ç–µ **—Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç** —Å `WEBHOOK_SECRET_HEADER` –≤ –ø–∞–Ω–µ–ª–∏ Remnawave
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤ –∏–ª–∏ —Å–∏–º–≤–æ–ª–æ–≤ –≤ –∑–Ω–∞—á–µ–Ω–∏—è—Ö
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã)
   - **–í–∞–∂–Ω–æ:** –ü–∞–Ω–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –∫–ª—é—á –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è HMAC –ø–æ–¥–ø–∏—Å–∏, –ø–æ—ç—Ç–æ–º—É –∫–ª—é—á–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏

2. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: `X-Remnawave-Signature header missing`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø–∞–Ω–µ–ª–∏ Remnawave —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `WEBHOOK_SECRET_HEADER`
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–∞–Ω–µ–ª—å Remnawave –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–æ–º**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –¥–µ—Ñ–∏—Å—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞ - —Ç–∞–º –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –¥–ª–∏–Ω–∞ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –∏ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏**
   - –í –ª–æ–≥–∞—Ö –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –±–æ—Ç–∞ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
     - –ö–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã
     - –î–ª–∏–Ω–∞ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –∏ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞
     - –ü–µ—Ä–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –±–µ–∑ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –ø–æ–ª–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è)
   - –ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å `Webhook signature mismatch` –∏–ª–∏ `X-Remnawave-Signature header missing`

**–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ–∫—Ä–µ—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è)
echo "–í –±–æ—Ç–µ: $WEBHOOK_SECRET"
echo "–í –ø–∞–Ω–µ–ª–∏: $WEBHOOK_SECRET_HEADER"
# –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω—ã
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å curl:

```bash
# –¢–µ—Å—Ç health endpoint
curl http://localhost:8080/webhook/health

# –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç userUuid)
curl -X POST http://localhost:8080/webhook/test \
  -H "Content-Type: application/json" \
  -H "X-Remnawave-Signature: –≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á" \
  -d '{"userUuid": "uuid-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}'
```
